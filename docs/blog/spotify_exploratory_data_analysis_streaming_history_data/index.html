<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Johann Wagner">
<meta name="dcterms.date" content="2023-12-29">
<meta name="description" content="My Spotify streaming history throughout July 2022/2023">
<title>Spotify Exploratory Data Analysis - Streaming History Data – Johann Wagner</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="../../styles.css">
</head>
<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Johann Wagner</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects/index.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv/index.html"> 
<span class="menu-text">CV</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/johannwagner/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/johann-wagner"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:johann.wagner@gmail.com"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#setup-and-configuration" id="toc-setup-and-configuration" class="nav-link" data-scroll-target="#setup-and-configuration">Setup and Configuration</a></li>
  <li><a href="#data-loading" id="toc-data-loading" class="nav-link" data-scroll-target="#data-loading">Data Loading</a></li>
  <li><a href="#data-tidying" id="toc-data-tidying" class="nav-link" data-scroll-target="#data-tidying">Data Tidying</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a></li>
  <li>
<a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration">Data Exploration</a>
  <ul class="collapse">
<li><a href="#sanity-checks" id="toc-sanity-checks" class="nav-link" data-scroll-target="#sanity-checks">Sanity Checks</a></li>
  <li><a href="#reshape-data-streaming-per-day" id="toc-reshape-data-streaming-per-day" class="nav-link" data-scroll-target="#reshape-data-streaming-per-day">Reshape Data: Streaming per day</a></li>
  <li><a href="#what-were-the-top-5-days-i-listened-to-music" id="toc-what-were-the-top-5-days-i-listened-to-music" class="nav-link" data-scroll-target="#what-were-the-top-5-days-i-listened-to-music">What were the top 5 days I listened to music?</a></li>
  <li><a href="#how-did-my-streaming-time-vary-by-day" id="toc-how-did-my-streaming-time-vary-by-day" class="nav-link" data-scroll-target="#how-did-my-streaming-time-vary-by-day">How did my streaming time vary by day?</a></li>
  <li><a href="#how-did-my-streaming-time-vary-by-month" id="toc-how-did-my-streaming-time-vary-by-month" class="nav-link" data-scroll-target="#how-did-my-streaming-time-vary-by-month">How did my streaming time vary by month?</a></li>
  <li><a href="#who-were-my-top-artists" id="toc-who-were-my-top-artists" class="nav-link" data-scroll-target="#who-were-my-top-artists">Who were my top artists?</a></li>
  <li><a href="#what-were-my-top-songs" id="toc-what-were-my-top-songs" class="nav-link" data-scroll-target="#what-were-my-top-songs">What were my top songs?</a></li>
  <li><a href="#how-did-my-top-10-songs-vary-across-time" id="toc-how-did-my-top-10-songs-vary-across-time" class="nav-link" data-scroll-target="#how-did-my-top-10-songs-vary-across-time">How did my top 10 songs vary across time?</a></li>
  </ul>
</li>
  <li><a href="#moving-forward" id="toc-moving-forward" class="nav-link" data-scroll-target="#moving-forward">Moving Forward</a></li>
  </ul></nav>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Spotify Exploratory Data Analysis - Streaming History Data</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Data Projects</div>
    <div class="quarto-category">Exploratory Data Analysis</div>
    <div class="quarto-category">Spotify</div>
  </div>
  </div>

<div>
  <div class="description">
    My Spotify streaming history throughout July 2022/2023
  </div>
</div>


<div class="quarto-title-meta column-page-right">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Johann Wagner </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 29, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This is a series of exploratory data analysis (EDA) projects on my Spotify data. The data was downloaded from my Spotify account on July 23rd, 2023. The data is downloaded as a zip file containing several json files and saved on my personal google drive. The json files are then converted into tibbles for analysis using the <code>jsonlite</code> package.</p>
<p>This quarto document is the first of several EDA projects. This project focuses on my streaming history. I’m interested in exploring my listening habits across the time period of the data. I’m also interested in exploring my listening habits across the days of the week.</p>
<p>This process is documented in the following sections:</p>
<ul>
<li><p>Setup and Configuration: Loading packages and googledrive API access</p></li>
<li><p>Data Loading: How to download and load the data?</p></li>
<li><p>Data Tidying: Get a tidy dataset</p></li>
<li><p>Data Cleaning: Ensure variables are in correct formats</p></li>
<li><p>Data Exploration: Answer one question and come up with two extra ones</p></li>
</ul>
<p>Let’s start exploring!</p>
</section><section id="setup-and-configuration" class="level2"><h2 class="anchored" data-anchor-id="setup-and-configuration">Setup and Configuration</h2>
<p>First, let’s load in the packages we’ll need for this project and authorise access to my google drive.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="do">### "Tidyverse"-oriented packages:</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># The tidyverse is a collection of R packages designed for data science.</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># All packages share a similar design philosophy, grammar, and data structures.</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># Tidyverse includes packages such as:</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># ggplot2, dplyr, tidyr, readr, purr, tibble, stringr, lubridate, and forcats.</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="do">### https://www.tidyverse.org/</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.4.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'forcats' was built under R version 4.4.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># To easily create data visualisations with simple and consistent syntax and grammar.</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co"># https://ggplot2.tidyverse.org/index.html</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co"># To allow interaction between files on Google Drive and R.</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co"># https://googledrive.tidyverse.org/</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="fu">library</span>(googledrive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'googledrive' was built under R version 4.4.2</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="do">### Other Packages:</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co"># To easily create summary statistics to understand and explore data.</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co"># https://docs.ropensci.org/skimr/</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="fu">library</span>(skimr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'skimr' was built under R version 4.4.2</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># A fast JSON parser and generator.</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="do">### https://cran.r-project.org/web/packages/jsonlite/index.html</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">library</span>(jsonlite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'jsonlite'

The following object is masked from 'package:purrr':

    flatten</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># To easily enable file referencing in project-oriented workflows.</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="co"># https://here.r-lib.org/</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>here() starts at C:/Users/Johan/Documents/GitHub/johann-wagner.github.io</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># To easily format and scale data in visualisations.</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co"># https://scales.r-lib.org/</span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="fu">library</span>(scales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'scales'

The following object is masked from 'package:purrr':

    discard

The following object is masked from 'package:readr':

    col_factor</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># Google Drive Authentication --------------------------------------------------</span></span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co"># To establish a connection between a Google Drive account and R.</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="fu">drive_auth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>! Using an auto-discovered, cached token.
  To suppress this message, modify your code or options to clearly consent to
  the use of a cached token.
  See gargle's "Non-interactive auth" vignette for more details:
  &lt;https://gargle.r-lib.org/articles/non-interactive-auth.html&gt;
ℹ The googledrive package is using a cached token for
  'johann.wagner@gmail.com'.</code></pre>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Example of how to download from Google Drive</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co"># drive_download(</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="co">#   # Where to download file from</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co">#   "https://drive.google.com/file/d/1Fjq1r6016H4isB2Cx2wg-Xm9zY7lHhYV/view?usp=drive_link",</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co"># </span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#   # Where to save it locally</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#   path = here("foldertest", "text2")</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">#   )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="data-loading" class="level2"><h2 class="anchored" data-anchor-id="data-loading">Data Loading</h2>
<p>To access the data, I need to download it from my google drive. The data is requested from Johann’s Spotify account and downloaded as a zip file containing several json files. There are several different json files; however, for this analysis I’m only interested in the Streaming History files.</p>
<p>You will only have access if Johann has given you read access to the email you authorised in 0-00_setup_and_configuration.R.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># Only download raw data if it hasn't already been downloaded</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="fu">here</span>(<span class="st">"raw_data"</span>))) {</span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">dir.create</span>(<span class="fu">here</span>(<span class="st">"raw_data"</span>), <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb18-4"><a href="#cb18-4"></a></span>
<span id="cb18-5"><a href="#cb18-5"></a>  <span class="co"># List contents of Spotify Analysis Folder</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>  spotify_dribble <span class="ot">&lt;-</span> <span class="fu">drive_ls</span>(<span class="st">"Spotify Analysis"</span>)</span>
<span id="cb18-7"><a href="#cb18-7"></a>  </span>
<span id="cb18-8"><a href="#cb18-8"></a>  <span class="co"># Download raw data</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>  <span class="fu">map2</span>(</span>
<span id="cb18-10"><a href="#cb18-10"></a>    spotify_dribble<span class="sc">$</span>id,</span>
<span id="cb18-11"><a href="#cb18-11"></a>    spotify_dribble<span class="sc">$</span>name,</span>
<span id="cb18-12"><a href="#cb18-12"></a>    <span class="sc">~</span> <span class="fu">drive_download</span>(</span>
<span id="cb18-13"><a href="#cb18-13"></a>      <span class="at">file =</span> <span class="fu">as_id</span>(.x),</span>
<span id="cb18-14"><a href="#cb18-14"></a>      <span class="at">path =</span> <span class="fu">here</span>(<span class="st">"raw_data"</span>, .y),</span>
<span id="cb18-15"><a href="#cb18-15"></a>      <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>    )</span>
<span id="cb18-17"><a href="#cb18-17"></a>  )</span>
<span id="cb18-18"><a href="#cb18-18"></a>}</span>
<span id="cb18-19"><a href="#cb18-19"></a></span>
<span id="cb18-20"><a href="#cb18-20"></a></span>
<span id="cb18-21"><a href="#cb18-21"></a></span>
<span id="cb18-22"><a href="#cb18-22"></a><span class="co"># Read in individual raw json as nested lists</span></span>
<span id="cb18-23"><a href="#cb18-23"></a><span class="co"># JRAW = RAW JSON</span></span>
<span id="cb18-24"><a href="#cb18-24"></a><span class="co"># RAW_JSON causes alphabetical ordering inconveniences in R environment.</span></span>
<span id="cb18-25"><a href="#cb18-25"></a>JRAW_STREAMING_HISTORY_0 <span class="ot">&lt;-</span> <span class="fu">read_json</span>(</span>
<span id="cb18-26"><a href="#cb18-26"></a>  <span class="at">path =</span> <span class="fu">here</span>(</span>
<span id="cb18-27"><a href="#cb18-27"></a>    <span class="st">"raw_data"</span>,</span>
<span id="cb18-28"><a href="#cb18-28"></a>    <span class="st">"StreamingHistory0.json"</span></span>
<span id="cb18-29"><a href="#cb18-29"></a>  )</span>
<span id="cb18-30"><a href="#cb18-30"></a>)</span>
<span id="cb18-31"><a href="#cb18-31"></a></span>
<span id="cb18-32"><a href="#cb18-32"></a>JRAW_STREAMING_HISTORY_1 <span class="ot">&lt;-</span> <span class="fu">read_json</span>(</span>
<span id="cb18-33"><a href="#cb18-33"></a>  <span class="at">path =</span> <span class="fu">here</span>(</span>
<span id="cb18-34"><a href="#cb18-34"></a>    <span class="st">"raw_data"</span>,</span>
<span id="cb18-35"><a href="#cb18-35"></a>    <span class="st">"StreamingHistory1.json"</span></span>
<span id="cb18-36"><a href="#cb18-36"></a>  )</span>
<span id="cb18-37"><a href="#cb18-37"></a>)</span>
<span id="cb18-38"><a href="#cb18-38"></a></span>
<span id="cb18-39"><a href="#cb18-39"></a>JRAW_STREAMING_HISTORY_2 <span class="ot">&lt;-</span> <span class="fu">read_json</span>(</span>
<span id="cb18-40"><a href="#cb18-40"></a>  <span class="at">path =</span> <span class="fu">here</span>(</span>
<span id="cb18-41"><a href="#cb18-41"></a>    <span class="st">"raw_data"</span>,</span>
<span id="cb18-42"><a href="#cb18-42"></a>    <span class="st">"StreamingHistory2.json"</span></span>
<span id="cb18-43"><a href="#cb18-43"></a>  )</span>
<span id="cb18-44"><a href="#cb18-44"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="data-tidying" class="level2"><h2 class="anchored" data-anchor-id="data-tidying">Data Tidying</h2>
<p>These json files are then converted into tibbles for analysis using the <code>jsonlite</code> package. The tibbles are then combined into one tibble, as they all have the same columns. I suspect the reason why there are different files is because of the size of the data.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>RAW_STREAMING_HISTORY_0 <span class="ot">&lt;-</span> JRAW_STREAMING_HISTORY_0 <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb19-4"><a href="#cb19-4"></a></span>
<span id="cb19-5"><a href="#cb19-5"></a>RAW_STREAMING_HISTORY_1 <span class="ot">&lt;-</span> JRAW_STREAMING_HISTORY_1 <span class="sc">%&gt;%</span> </span>
<span id="cb19-6"><a href="#cb19-6"></a>  <span class="fu">bind_rows</span>() <span class="sc">|&gt;</span> </span>
<span id="cb19-7"><a href="#cb19-7"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb19-8"><a href="#cb19-8"></a></span>
<span id="cb19-9"><a href="#cb19-9"></a>RAW_STREAMING_HISTORY_2 <span class="ot">&lt;-</span> JRAW_STREAMING_HISTORY_2 <span class="sc">%&gt;%</span> </span>
<span id="cb19-10"><a href="#cb19-10"></a>  <span class="fu">bind_rows</span>() <span class="sc">|&gt;</span> </span>
<span id="cb19-11"><a href="#cb19-11"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb19-12"><a href="#cb19-12"></a></span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="co"># Combine all streaming history tibbles into one tibble</span></span>
<span id="cb19-14"><a href="#cb19-14"></a>RAW_STREAMING_HISTORY <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb19-15"><a href="#cb19-15"></a>  RAW_STREAMING_HISTORY_0,</span>
<span id="cb19-16"><a href="#cb19-16"></a>  RAW_STREAMING_HISTORY_1,</span>
<span id="cb19-17"><a href="#cb19-17"></a>  RAW_STREAMING_HISTORY_2</span>
<span id="cb19-18"><a href="#cb19-18"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="data-cleaning" class="level2"><h2 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h2>
<p>Let’s ensure the variables are in the correct format.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>CLEANED_STREAMING_HISTORY <span class="ot">&lt;-</span> RAW_STREAMING_HISTORY <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-3"><a href="#cb20-3"></a>    <span class="co"># Convert ms to minutes</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>    <span class="at">min_played =</span> <span class="fu">as.numeric</span>(msPlayed <span class="sc">/</span> <span class="dv">60000</span>),</span>
<span id="cb20-5"><a href="#cb20-5"></a>    </span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="co"># Convert artistName to factor</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>    <span class="at">artist_name =</span> <span class="fu">as.factor</span>(artistName),</span>
<span id="cb20-8"><a href="#cb20-8"></a>    </span>
<span id="cb20-9"><a href="#cb20-9"></a>    <span class="at">track_name =</span> <span class="fu">as.character</span>(trackName),</span>
<span id="cb20-10"><a href="#cb20-10"></a>    </span>
<span id="cb20-11"><a href="#cb20-11"></a>    <span class="co"># Convert endTime into lubridate datetime</span></span>
<span id="cb20-12"><a href="#cb20-12"></a>    <span class="at">streaming_datetime =</span> <span class="fu">as_date</span>(endTime, <span class="at">format =</span> <span class="st">"%Y-%m-%d %H:%M"</span>)</span>
<span id="cb20-13"><a href="#cb20-13"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb20-14"><a href="#cb20-14"></a>  </span>
<span id="cb20-15"><a href="#cb20-15"></a>  <span class="co"># Remove unnecessary columns</span></span>
<span id="cb20-16"><a href="#cb20-16"></a>  <span class="fu">select</span>(</span>
<span id="cb20-17"><a href="#cb20-17"></a>    artist_name,</span>
<span id="cb20-18"><a href="#cb20-18"></a>    track_name,</span>
<span id="cb20-19"><a href="#cb20-19"></a>    streaming_datetime,</span>
<span id="cb20-20"><a href="#cb20-20"></a>    min_played</span>
<span id="cb20-21"><a href="#cb20-21"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="data-exploration" class="level2"><h2 class="anchored" data-anchor-id="data-exploration">Data Exploration</h2>
<p>This data exploration has two objectives: 1. To get a sense of the data and to see if there are any issues with the data. 2. To answer several questions that I have about my listening habits.</p>
<section id="sanity-checks" class="level3"><h3 class="anchored" data-anchor-id="sanity-checks">Sanity Checks</h3>
<p>There are 23456 rows in the CLEANED_STREAMING_HISTORY tibble, which is the number of songs/podcast episodes that I have listened to between 2022-07-11 and 2023-07-11. Let’s use the function <code>skim()</code> from the skimr package to get a sense check of the data.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>CLEANED_STREAMING_HISTORY <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">skim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">CLEANED_STREAMING_HISTORY</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">23456</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Date</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">track_name</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">179</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7782</td>
<td style="text-align: right;">0</td>
</tr></tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 22%">
<col style="width: 11%">
<col style="width: 16%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 10%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">min</th>
<th style="text-align: left;">max</th>
<th style="text-align: left;">median</th>
<th style="text-align: right;">n_unique</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">streaming_datetime</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">2022-07-11</td>
<td style="text-align: left;">2023-07-11</td>
<td style="text-align: left;">2022-12-01</td>
<td style="text-align: right;">337</td>
</tr></tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 42%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">artist_name</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4324</td>
<td style="text-align: left;">Par: 1147, Van: 271, Cou: 217, Lof: 183</td>
</tr></tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 18%">
<col style="width: 13%">
<col style="width: 18%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">min_played</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.01</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.56</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">82.34</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr></tbody>
</table>
</div>
</div>
<p>There are 4 columns in the CLEANED_STREAMING_HISTORY tibble. There are 4324 unique artists and 7782 unique tracks in the CLEANED_STREAMING_HISTORY tibble. It is interesting that the shortest <code>track_name</code> has a length of 1 characters and the longest <code>track_name</code> has a length of 179 characters. Interestingly, the shortest <code>track_name</code> has a length of 1 characters. I wonder what song that is. The date ranges between 2022-07-11 and 2023-07-11.</p>
<p>It seems like the data mostly makes sense and that there are a wide range of song names and artist names.</p>
</section><section id="reshape-data-streaming-per-day" class="level3"><h3 class="anchored" data-anchor-id="reshape-data-streaming-per-day">Reshape Data: Streaming per day</h3>
<p>Let’s reshape the data so that we can see how much I have streamed per day.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>STREAMING_HISTORY_PER_DAY <span class="ot">&lt;-</span> CLEANED_STREAMING_HISTORY <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">group_by</span>(streaming_datetime) <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb22-4"><a href="#cb22-4"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(min_played <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb22-5"><a href="#cb22-5"></a>  )</span>
<span id="cb22-6"><a href="#cb22-6"></a>STREAMING_HISTORY_PER_DAY</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 337 × 2
   streaming_datetime total_hours_played
   &lt;date&gt;                          &lt;dbl&gt;
 1 2022-07-11                      2.41 
 2 2022-07-12                      5.31 
 3 2022-07-13                      2.78 
 4 2022-07-14                      3.52 
 5 2022-07-15                      4.38 
 6 2022-07-16                      9.42 
 7 2022-07-17                      4.99 
 8 2022-07-18                      3.64 
 9 2022-07-19                      3.78 
10 2022-07-20                      0.147
# ℹ 327 more rows</code></pre>
</div>
</div>
</section><section id="what-were-the-top-5-days-i-listened-to-music" class="level3"><h3 class="anchored" data-anchor-id="what-were-the-top-5-days-i-listened-to-music">What were the top 5 days I listened to music?</h3>
<p>Let’s now investigate what the top 5 days I listened to music were and include the day of the week.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>TOP_SONGS <span class="ot">&lt;-</span> STREAMING_HISTORY_PER_DAY <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-3"><a href="#cb24-3"></a>    <span class="at">day_of_week =</span> <span class="fu">wday</span>(streaming_datetime, <span class="at">label =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-4"><a href="#cb24-4"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_hours_played)) <span class="sc">|&gt;</span> </span>
<span id="cb24-6"><a href="#cb24-6"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb24-7"><a href="#cb24-7"></a>TOP_SONGS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  streaming_datetime total_hours_played day_of_week
  &lt;date&gt;                          &lt;dbl&gt; &lt;ord&gt;      
1 2023-05-30                       17.2 Tue        
2 2023-02-18                       13.9 Sat        
3 2022-11-01                       11.9 Tue        
4 2022-12-16                       11.8 Fri        
5 2022-09-02                       11.2 Fri        </code></pre>
</div>
</div>
<p>It seems like 2023-05-30 and 2023-02-18 were two days when I listened to a LOT of music.</p>
<p>Let’s pull it back and look at the aggregate again; I wonder what the most listened to days are?</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>STREAMING_HISTORY_PER_DAY <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-3"><a href="#cb26-3"></a>    <span class="at">day_of_week =</span> <span class="fu">wday</span>(streaming_datetime, <span class="at">label =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-4"><a href="#cb26-4"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb26-5"><a href="#cb26-5"></a>  <span class="fu">group_by</span>(day_of_week) <span class="sc">|&gt;</span></span>
<span id="cb26-6"><a href="#cb26-6"></a>  <span class="fu">summarise</span>(</span>
<span id="cb26-7"><a href="#cb26-7"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(total_hours_played)</span>
<span id="cb26-8"><a href="#cb26-8"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-9"><a href="#cb26-9"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_hours_played))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  day_of_week total_hours_played
  &lt;ord&gt;                    &lt;dbl&gt;
1 Mon                       199.
2 Tue                       185.
3 Sat                       180.
4 Fri                       164.
5 Thu                       157.
6 Sun                       151.
7 Wed                       140.</code></pre>
</div>
</div>
<p>Surprisingly, it seems like Mondays are the days where I have listened to the most streamed music. I wonder if this is because I listen to music on my commute to work? Although, I don’t think I was really working consistently in 2022-23.</p>
<p>So potentially this is because I listen to music when I was studying? To answer this question and gain more insights, I would need to look at my calendar and see what I was doing on those days.</p>
</section><section id="how-did-my-streaming-time-vary-by-day" class="level3"><h3 class="anchored" data-anchor-id="how-did-my-streaming-time-vary-by-day">How did my streaming time vary by day?</h3>
<p>Let’s plot the total hours played per day.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>GGPLOT_HOURS_PLAYED_PER_DAY <span class="ot">&lt;-</span> STREAMING_HISTORY_PER_DAY <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> streaming_datetime, <span class="at">y =</span> total_hours_played)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>  </span>
<span id="cb28-4"><a href="#cb28-4"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb28-5"><a href="#cb28-5"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6"></a>  </span>
<span id="cb28-7"><a href="#cb28-7"></a>  <span class="fu">labs</span>(</span>
<span id="cb28-8"><a href="#cb28-8"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb28-9"><a href="#cb28-9"></a>    <span class="at">y =</span> <span class="st">"Hours Played"</span>,</span>
<span id="cb28-10"><a href="#cb28-10"></a>    <span class="at">title =</span> <span class="st">"Hours Played Per Day"</span>,</span>
<span id="cb28-11"><a href="#cb28-11"></a>    <span class="at">subtitle =</span> <span class="st">"Spotify Streaming History"</span></span>
<span id="cb28-12"><a href="#cb28-12"></a>  ) <span class="sc">+</span></span>
<span id="cb28-13"><a href="#cb28-13"></a>  </span>
<span id="cb28-14"><a href="#cb28-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb28-15"><a href="#cb28-15"></a>  <span class="fu">theme</span>(</span>
<span id="cb28-16"><a href="#cb28-16"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb28-17"><a href="#cb28-17"></a>      <span class="at">size =</span> <span class="dv">20</span>,</span>
<span id="cb28-18"><a href="#cb28-18"></a>      <span class="at">face =</span> <span class="st">"bold"</span></span>
<span id="cb28-19"><a href="#cb28-19"></a>    ),</span>
<span id="cb28-20"><a href="#cb28-20"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb28-21"><a href="#cb28-21"></a>      <span class="at">size =</span> <span class="dv">15</span></span>
<span id="cb28-22"><a href="#cb28-22"></a>    ),</span>
<span id="cb28-23"><a href="#cb28-23"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb28-24"><a href="#cb28-24"></a>      <span class="at">size =</span> <span class="dv">15</span></span>
<span id="cb28-25"><a href="#cb28-25"></a>    ),</span>
<span id="cb28-26"><a href="#cb28-26"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(</span>
<span id="cb28-27"><a href="#cb28-27"></a>      <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb28-28"><a href="#cb28-28"></a>    )</span>
<span id="cb28-29"><a href="#cb28-29"></a>  )</span>
<span id="cb28-30"><a href="#cb28-30"></a></span>
<span id="cb28-31"><a href="#cb28-31"></a>GGPLOT_HOURS_PLAYED_PER_DAY</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There is a high fluctuation in the number of hours played per day with some days, when very little music was played and some days were a lot of music was played. It seems that there are two days in particular, where I have listened to a lot of music. Let’s investigate these days further, we know that the days are: 2023-05-30 and 2023-02-18. What did I do on these two days? Let’s also include a smoothed line.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>GGPLOT_HOURS_PLAYED_PER_DAY <span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>  </span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(</span>
<span id="cb29-4"><a href="#cb29-4"></a>    <span class="at">colour =</span> <span class="fu">ifelse</span>(</span>
<span id="cb29-5"><a href="#cb29-5"></a>      streaming_datetime <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">"2023-05-30"</span>) <span class="sc">|</span> </span>
<span id="cb29-6"><a href="#cb29-6"></a>        streaming_datetime <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-18"</span>),</span>
<span id="cb29-7"><a href="#cb29-7"></a>      <span class="st">"red"</span>,</span>
<span id="cb29-8"><a href="#cb29-8"></a>      <span class="st">"darkgrey"</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>    )</span>
<span id="cb29-10"><a href="#cb29-10"></a>    )</span>
<span id="cb29-11"><a href="#cb29-11"></a>  ) <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12"></a>  <span class="fu">geom_line</span>(<span class="at">colour =</span> <span class="st">"darkgrey"</span>) <span class="sc">+</span></span>
<span id="cb29-13"><a href="#cb29-13"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb29-14"><a href="#cb29-14"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb29-15"><a href="#cb29-15"></a>    <span class="at">label =</span> <span class="st">"Flying to Australia"</span>,</span>
<span id="cb29-16"><a href="#cb29-16"></a>    <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2023-05-30"</span>),</span>
<span id="cb29-17"><a href="#cb29-17"></a>    <span class="at">y =</span> STREAMING_HISTORY_PER_DAY <span class="sc">|&gt;</span> </span>
<span id="cb29-18"><a href="#cb29-18"></a>      <span class="fu">filter</span>(streaming_datetime <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">"2023-05-30"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb29-19"><a href="#cb29-19"></a>      <span class="fu">pull</span>(total_hours_played),</span>
<span id="cb29-20"><a href="#cb29-20"></a>    <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span></span>
<span id="cb29-21"><a href="#cb29-21"></a>  ) <span class="sc">+</span></span>
<span id="cb29-22"><a href="#cb29-22"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb29-23"><a href="#cb29-23"></a>    <span class="at">label =</span> <span class="st">"Flying to Austria"</span>,</span>
<span id="cb29-24"><a href="#cb29-24"></a>    <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-18"</span>),</span>
<span id="cb29-25"><a href="#cb29-25"></a>    <span class="at">y =</span> STREAMING_HISTORY_PER_DAY <span class="sc">|&gt;</span> </span>
<span id="cb29-26"><a href="#cb29-26"></a>      <span class="fu">filter</span>(streaming_datetime <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-18"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb29-27"><a href="#cb29-27"></a>      <span class="fu">pull</span>(total_hours_played),</span>
<span id="cb29-28"><a href="#cb29-28"></a>    <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span></span>
<span id="cb29-29"><a href="#cb29-29"></a>  ) <span class="sc">+</span></span>
<span id="cb29-30"><a href="#cb29-30"></a>    <span class="fu">expand_limits</span>(</span>
<span id="cb29-31"><a href="#cb29-31"></a>    <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>)</span>
<span id="cb29-32"><a href="#cb29-32"></a>  ) <span class="sc">+</span></span>
<span id="cb29-33"><a href="#cb29-33"></a>  <span class="fu">scale_color_identity</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Flying in the plane and listening to music! That makes sense. The smoothed line suggests that there was more music listened to in the second half of 2022 than the first half of 2023.</p>
</section><section id="how-did-my-streaming-time-vary-by-month" class="level3"><h3 class="anchored" data-anchor-id="how-did-my-streaming-time-vary-by-month">How did my streaming time vary by month?</h3>
<p>Let’s investigate this further: what was the total number of hours played per month?</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>STREAMING_HISTORY_PER_MONTH <span class="ot">&lt;-</span> CLEANED_STREAMING_HISTORY <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-3"><a href="#cb31-3"></a>    <span class="at">month_floor =</span> <span class="fu">floor_date</span>(streaming_datetime, <span class="at">unit =</span> <span class="st">"month"</span>),</span>
<span id="cb31-4"><a href="#cb31-4"></a>    <span class="at">year_floor =</span> <span class="fu">floor_date</span>(streaming_datetime, <span class="at">unit =</span> <span class="st">"year"</span>)</span>
<span id="cb31-5"><a href="#cb31-5"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb31-6"><a href="#cb31-6"></a>  <span class="fu">group_by</span>(month_floor, year_floor) <span class="sc">|&gt;</span></span>
<span id="cb31-7"><a href="#cb31-7"></a>  <span class="fu">summarise</span>(</span>
<span id="cb31-8"><a href="#cb31-8"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(min_played <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb31-9"><a href="#cb31-9"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'month_floor'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<p>Let’s plot the total hours played per month.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>STREAMING_HISTORY_PER_MONTH <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> month_floor, <span class="at">y =</span> total_hours_played)) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3"></a>  </span>
<span id="cb33-4"><a href="#cb33-4"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6"></a>  </span>
<span id="cb33-7"><a href="#cb33-7"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-8"><a href="#cb33-8"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb33-9"><a href="#cb33-9"></a>    <span class="at">y =</span> <span class="st">"Hours Played"</span>,</span>
<span id="cb33-10"><a href="#cb33-10"></a>    <span class="at">title =</span> <span class="st">"Hours Played Per Month"</span>,</span>
<span id="cb33-11"><a href="#cb33-11"></a>    <span class="at">subtitle =</span> <span class="st">"Spotify Streaming History"</span></span>
<span id="cb33-12"><a href="#cb33-12"></a>  ) <span class="sc">+</span></span>
<span id="cb33-13"><a href="#cb33-13"></a>  </span>
<span id="cb33-14"><a href="#cb33-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb33-15"><a href="#cb33-15"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-16"><a href="#cb33-16"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb33-17"><a href="#cb33-17"></a>      <span class="at">size =</span> <span class="dv">20</span>,</span>
<span id="cb33-18"><a href="#cb33-18"></a>      <span class="at">face =</span> <span class="st">"bold"</span></span>
<span id="cb33-19"><a href="#cb33-19"></a>    ),</span>
<span id="cb33-20"><a href="#cb33-20"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb33-21"><a href="#cb33-21"></a>      <span class="at">size =</span> <span class="dv">15</span></span>
<span id="cb33-22"><a href="#cb33-22"></a>    ),</span>
<span id="cb33-23"><a href="#cb33-23"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb33-24"><a href="#cb33-24"></a>      <span class="at">size =</span> <span class="dv">15</span></span>
<span id="cb33-25"><a href="#cb33-25"></a>    ),</span>
<span id="cb33-26"><a href="#cb33-26"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(</span>
<span id="cb33-27"><a href="#cb33-27"></a>      <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb33-28"><a href="#cb33-28"></a>    )</span>
<span id="cb33-29"><a href="#cb33-29"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There seems to be a bit of a pattern. Before I went backpacking (Jan 2023), I was listening to a lot more music. Let’s calculate the total number of hours played in both years and see how different they are.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>STREAMING_HISTORY_PER_MONTH <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">group_by</span>(year_floor) <span class="sc">|&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb34-4"><a href="#cb34-4"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(total_hours_played)</span>
<span id="cb34-5"><a href="#cb34-5"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  year_floor total_hours_played
  &lt;date&gt;                  &lt;dbl&gt;
1 2022-01-01               697.
2 2023-01-01               481.</code></pre>
</div>
</div>
<p>There definitely seems like there is a major difference between the two years. I wonder if this is because I was travelling in 2023 and therefore didn’t have as much time to listen to music. Let’s investigate this further.</p>
</section><section id="who-were-my-top-artists" class="level3"><h3 class="anchored" data-anchor-id="who-were-my-top-artists">Who were my top artists?</h3>
<p>Let’s investigate who my top artists are. We will do this by grouping by artist name and then calculating the total number of hours played.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>CLEANED_STREAMING_HISTORY <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2"></a>  <span class="fu">group_by</span>(artist_name) <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb36-4"><a href="#cb36-4"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(min_played <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb36-5"><a href="#cb36-5"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb36-6"><a href="#cb36-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_hours_played)) <span class="sc">|&gt;</span> </span>
<span id="cb36-7"><a href="#cb36-7"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb36-8"><a href="#cb36-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(artist_name, total_hours_played), <span class="at">y =</span> total_hours_played)) <span class="sc">+</span></span>
<span id="cb36-9"><a href="#cb36-9"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">ifelse</span>(total_hours_played <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="st">"orange"</span>, <span class="st">"grey"</span>))) <span class="sc">+</span></span>
<span id="cb36-10"><a href="#cb36-10"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb36-11"><a href="#cb36-11"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb36-12"><a href="#cb36-12"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">10</span>)</span>
<span id="cb36-13"><a href="#cb36-13"></a>  ) <span class="sc">+</span></span>
<span id="cb36-14"><a href="#cb36-14"></a>  <span class="fu">scale_fill_identity</span>() <span class="sc">+</span></span>
<span id="cb36-15"><a href="#cb36-15"></a>  <span class="fu">labs</span>(</span>
<span id="cb36-16"><a href="#cb36-16"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb36-17"><a href="#cb36-17"></a>    <span class="at">y =</span> <span class="st">"Hours Played"</span>,</span>
<span id="cb36-18"><a href="#cb36-18"></a>    <span class="at">title =</span> <span class="st">"Top Artists"</span>,</span>
<span id="cb36-19"><a href="#cb36-19"></a>    <span class="at">subtitle =</span> <span class="st">"Spotify Streaming History: July 2022 - July 2023"</span></span>
<span id="cb36-20"><a href="#cb36-20"></a>  ) <span class="sc">+</span></span>
<span id="cb36-21"><a href="#cb36-21"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As expected, I’m a massive Parcels fan and the data shows it! Let’s look at my top artists for each month.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>CLEANED_STREAMING_HISTORY <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-3"><a href="#cb37-3"></a>    <span class="at">month_floor =</span> <span class="fu">floor_date</span>(streaming_datetime, <span class="at">unit =</span> <span class="st">"month"</span>)</span>
<span id="cb37-4"><a href="#cb37-4"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb37-5"><a href="#cb37-5"></a>  <span class="fu">group_by</span>(month_floor, artist_name) <span class="sc">|&gt;</span></span>
<span id="cb37-6"><a href="#cb37-6"></a>  <span class="fu">summarise</span>(</span>
<span id="cb37-7"><a href="#cb37-7"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(min_played <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb37-8"><a href="#cb37-8"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb37-9"><a href="#cb37-9"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_hours_played)) <span class="sc">|&gt;</span> </span>
<span id="cb37-10"><a href="#cb37-10"></a>  <span class="fu">group_by</span>(month_floor) <span class="sc">|&gt;</span> </span>
<span id="cb37-11"><a href="#cb37-11"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb37-12"><a href="#cb37-12"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> month_floor, <span class="at">y =</span> total_hours_played, <span class="at">fill =</span> artist_name)) <span class="sc">+</span></span>
<span id="cb37-13"><a href="#cb37-13"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb37-14"><a href="#cb37-14"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb37-15"><a href="#cb37-15"></a>  <span class="fu">labs</span>(</span>
<span id="cb37-16"><a href="#cb37-16"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb37-17"><a href="#cb37-17"></a>    <span class="at">y =</span> <span class="st">"Hours Played"</span>,</span>
<span id="cb37-18"><a href="#cb37-18"></a>    <span class="at">title =</span> <span class="st">"Top Artists Per Month"</span>,</span>
<span id="cb37-19"><a href="#cb37-19"></a>    <span class="at">subtitle =</span> <span class="st">"Spotify Streaming History: July 2022 - July 2023"</span></span>
<span id="cb37-20"><a href="#cb37-20"></a>  ) <span class="sc">+</span></span>
<span id="cb37-21"><a href="#cb37-21"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'month_floor'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wow, Parcels really was my favourite artist consistently throughout the time range, although from April 2023 onwards, it seems I started listening to more podcasts. A further question for future investigation: How does my podcast listening behaviour change over time.</p>
</section><section id="what-were-my-top-songs" class="level3"><h3 class="anchored" data-anchor-id="what-were-my-top-songs">What were my top songs?</h3>
<p>Let’s move onto top songs. We will do this by grouping by track name and then calculating the total number of hours played.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>CLEANED_STREAMING_HISTORY <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="#cb39-2"></a>  <span class="fu">group_by</span>(track_name, artist_name) <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb39-4"><a href="#cb39-4"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(min_played <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb39-5"><a href="#cb39-5"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb39-6"><a href="#cb39-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_hours_played)) <span class="sc">|&gt;</span> </span>
<span id="cb39-7"><a href="#cb39-7"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb39-8"><a href="#cb39-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(track_name, total_hours_played), <span class="at">y =</span> total_hours_played)) <span class="sc">+</span></span>
<span id="cb39-9"><a href="#cb39-9"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">ifelse</span>(artist_name <span class="sc">==</span> <span class="st">"Parcels"</span>, <span class="st">"orange"</span>, <span class="st">"grey"</span>))) <span class="sc">+</span></span>
<span id="cb39-10"><a href="#cb39-10"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb39-11"><a href="#cb39-11"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb39-12"><a href="#cb39-12"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">2</span>)</span>
<span id="cb39-13"><a href="#cb39-13"></a>  ) <span class="sc">+</span></span>
<span id="cb39-14"><a href="#cb39-14"></a>  <span class="fu">scale_fill_identity</span>() <span class="sc">+</span></span>
<span id="cb39-15"><a href="#cb39-15"></a>  <span class="fu">labs</span>(</span>
<span id="cb39-16"><a href="#cb39-16"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb39-17"><a href="#cb39-17"></a>    <span class="at">y =</span> <span class="st">"Hours Played"</span>,</span>
<span id="cb39-18"><a href="#cb39-18"></a>    <span class="at">title =</span> <span class="st">"Top Songs"</span>,</span>
<span id="cb39-19"><a href="#cb39-19"></a>    <span class="at">subtitle =</span> <span class="st">"Spotify Streaming History: July 2022 - July 2023</span><span class="sc">\n</span><span class="st">Orange = Parcels"</span></span>
<span id="cb39-20"><a href="#cb39-20"></a>  ) <span class="sc">+</span></span>
<span id="cb39-21"><a href="#cb39-21"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'track_name'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Five of the top 10 songs were songs from Parcels.</p>
<p>Let’s look at the top songs for each month.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>CLEANED_STREAMING_HISTORY <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a href="#cb41-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-3"><a href="#cb41-3"></a>    <span class="at">month_floor =</span> <span class="fu">floor_date</span>(streaming_datetime, <span class="at">unit =</span> <span class="st">"month"</span>)</span>
<span id="cb41-4"><a href="#cb41-4"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb41-5"><a href="#cb41-5"></a>  <span class="fu">group_by</span>(month_floor, track_name, artist_name) <span class="sc">|&gt;</span></span>
<span id="cb41-6"><a href="#cb41-6"></a>  <span class="fu">summarise</span>(</span>
<span id="cb41-7"><a href="#cb41-7"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(min_played <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb41-8"><a href="#cb41-8"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb41-9"><a href="#cb41-9"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_hours_played)) <span class="sc">|&gt;</span> </span>
<span id="cb41-10"><a href="#cb41-10"></a>  <span class="fu">group_by</span>(month_floor) <span class="sc">|&gt;</span> </span>
<span id="cb41-11"><a href="#cb41-11"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb41-12"><a href="#cb41-12"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-13"><a href="#cb41-13"></a>    <span class="at">fill_colour =</span> <span class="fu">case_when</span>(</span>
<span id="cb41-14"><a href="#cb41-14"></a>      track_name <span class="sc">==</span> <span class="st">"Lost in Music - Dimitri from Paris Remix"</span> <span class="sc">~</span> <span class="st">"pink"</span>,</span>
<span id="cb41-15"><a href="#cb41-15"></a>      artist_name <span class="sc">==</span> <span class="st">"Parcels"</span> <span class="sc">~</span> <span class="st">"orange"</span>,</span>
<span id="cb41-16"><a href="#cb41-16"></a>      <span class="at">.default =</span> <span class="st">"grey"</span></span>
<span id="cb41-17"><a href="#cb41-17"></a>      )</span>
<span id="cb41-18"><a href="#cb41-18"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb41-19"><a href="#cb41-19"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> month_floor, <span class="at">y =</span> total_hours_played, <span class="at">fill =</span> fill_colour)) <span class="sc">+</span></span>
<span id="cb41-20"><a href="#cb41-20"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb41-21"><a href="#cb41-21"></a>  <span class="fu">scale_fill_identity</span>() <span class="sc">+</span></span>
<span id="cb41-22"><a href="#cb41-22"></a>  <span class="fu">labs</span>(</span>
<span id="cb41-23"><a href="#cb41-23"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb41-24"><a href="#cb41-24"></a>    <span class="at">y =</span> <span class="st">"Hours Played"</span>,</span>
<span id="cb41-25"><a href="#cb41-25"></a>    <span class="at">title =</span> <span class="st">"Top Songs Per Month"</span>,</span>
<span id="cb41-26"><a href="#cb41-26"></a>    <span class="at">subtitle =</span> <span class="st">"Spotify Streaming History: July 2022 - July 2023</span><span class="sc">\n</span><span class="st">Orange = Parcels</span><span class="sc">\n</span><span class="st">Pink = Lost in Music - Dimitri from Paris Remix"</span></span>
<span id="cb41-27"><a href="#cb41-27"></a>  ) <span class="sc">+</span></span>
<span id="cb41-28"><a href="#cb41-28"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'month_floor', 'track_name'. You can
override using the `.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It seems that I listened to Lost in Music - Dimitri from Paris Remix a lot in July/August 2022. Parcels was my top artist for every month, but it seems that I listened to them a lot more in October 2022 and January/Febuary 2023.</p>
</section><section id="how-did-my-top-10-songs-vary-across-time" class="level3"><h3 class="anchored" data-anchor-id="how-did-my-top-10-songs-vary-across-time">How did my top 10 songs vary across time?</h3>
<p>Let’s investigate how my top 10 songs varied across time. We will do this by grouping by track name and then calculating the total number of hours played.</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>top_ten_songs <span class="ot">&lt;-</span> CLEANED_STREAMING_HISTORY <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2"></a>  <span class="fu">group_by</span>(track_name) <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb43-4"><a href="#cb43-4"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(min_played <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb43-5"><a href="#cb43-5"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb43-6"><a href="#cb43-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total_hours_played)) <span class="sc">|&gt;</span> </span>
<span id="cb43-7"><a href="#cb43-7"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb43-8"><a href="#cb43-8"></a>  <span class="fu">pull</span>(track_name)</span>
<span id="cb43-9"><a href="#cb43-9"></a></span>
<span id="cb43-10"><a href="#cb43-10"></a>CLEANED_STREAMING_HISTORY <span class="sc">|&gt;</span></span>
<span id="cb43-11"><a href="#cb43-11"></a>  <span class="fu">filter</span>(track_name <span class="sc">%in%</span> top_ten_songs) <span class="sc">|&gt;</span> </span>
<span id="cb43-12"><a href="#cb43-12"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-13"><a href="#cb43-13"></a>    <span class="at">month_floor =</span> <span class="fu">floor_date</span>(streaming_datetime, <span class="at">unit =</span> <span class="st">"month"</span>)</span>
<span id="cb43-14"><a href="#cb43-14"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb43-15"><a href="#cb43-15"></a>  <span class="fu">group_by</span>(month_floor, track_name) <span class="sc">|&gt;</span></span>
<span id="cb43-16"><a href="#cb43-16"></a>  <span class="fu">summarise</span>(</span>
<span id="cb43-17"><a href="#cb43-17"></a>    <span class="at">total_hours_played =</span> <span class="fu">sum</span>(min_played <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb43-18"><a href="#cb43-18"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb43-19"><a href="#cb43-19"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> month_floor, <span class="at">y =</span> total_hours_played, <span class="at">colour =</span> track_name)) <span class="sc">+</span></span>
<span id="cb43-20"><a href="#cb43-20"></a>  </span>
<span id="cb43-21"><a href="#cb43-21"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb43-22"><a href="#cb43-22"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb43-23"><a href="#cb43-23"></a>  </span>
<span id="cb43-24"><a href="#cb43-24"></a>  <span class="fu">labs</span>(</span>
<span id="cb43-25"><a href="#cb43-25"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb43-26"><a href="#cb43-26"></a>    <span class="at">y =</span> <span class="st">"Hours Played"</span>,</span>
<span id="cb43-27"><a href="#cb43-27"></a>    <span class="at">title =</span> <span class="st">"Top 5 Songs - Hours Played Per Day"</span>,</span>
<span id="cb43-28"><a href="#cb43-28"></a>    <span class="at">subtitle =</span> <span class="st">"Spotify Streaming History"</span>,</span>
<span id="cb43-29"><a href="#cb43-29"></a>    <span class="at">colour =</span> <span class="st">"Track Name"</span></span>
<span id="cb43-30"><a href="#cb43-30"></a>  ) <span class="sc">+</span></span>
<span id="cb43-31"><a href="#cb43-31"></a>  </span>
<span id="cb43-32"><a href="#cb43-32"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb43-33"><a href="#cb43-33"></a>  <span class="fu">theme</span>(</span>
<span id="cb43-34"><a href="#cb43-34"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb43-35"><a href="#cb43-35"></a>      <span class="at">size =</span> <span class="dv">20</span>,</span>
<span id="cb43-36"><a href="#cb43-36"></a>      <span class="at">face =</span> <span class="st">"bold"</span></span>
<span id="cb43-37"><a href="#cb43-37"></a>    ),</span>
<span id="cb43-38"><a href="#cb43-38"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb43-39"><a href="#cb43-39"></a>      <span class="at">size =</span> <span class="dv">15</span></span>
<span id="cb43-40"><a href="#cb43-40"></a>    ),</span>
<span id="cb43-41"><a href="#cb43-41"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb43-42"><a href="#cb43-42"></a>      <span class="at">size =</span> <span class="dv">15</span></span>
<span id="cb43-43"><a href="#cb43-43"></a>    ),</span>
<span id="cb43-44"><a href="#cb43-44"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(</span>
<span id="cb43-45"><a href="#cb43-45"></a>      <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb43-46"><a href="#cb43-46"></a>    )</span>
<span id="cb43-47"><a href="#cb43-47"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'month_floor'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This is super interesting. It seems that there are some rough patterns in my top 5 songs. For example, “Lost in Music - Dimitri from Paris Remix” was played a lot in the first half of 2022 and then not at all in the first half of 2023. Similarly, “The Girl” has a similar downwards trend. “Tieduprightnow” was played a lot in the new year (2023); however, also dropped. “Free” and “Bitter Sweet Symphony” were almost perfectly positively correlated with each other with the exception of late 2022.</p>
<p>I wonder if I could do this analysis for all of my songs and then create a grouping/cluster analysis to see if there are any temporal patterns in my music listening? Are there some songs that I listen to with other songs? Do these songs group together because I usually listen to them from the same playlist? Can I somehow link/predict my playlist data and my streaming data?</p>
</section></section><section id="moving-forward" class="level2"><h2 class="anchored" data-anchor-id="moving-forward">Moving Forward</h2>
<p>There are quite a few questions that I would like to explore in the future. For example: - I would like to explore how my podcast listening behaviour change over time. - I would like to explore how my top 10 songs varied across time and utilise the <code>gganimate</code> package. - I would really like to do some time series analysis on my streaming history. - I’m curious on linking my streaming history data with my playlist data. I wonder if I can predict my playlist data based on my streaming history data. I think I would typically use Spotify by listening to my playlists, so potentially doing some clustering/grouping analysis on my streaming history data and then linking it to my playlist data would be interesting.</p>
<p>These are all questions that I would like to explore in future! But for now, these were some great first initial data explorations of my Spotify streaming history. I hope you enjoyed reading this post and I hope you learned something new about Spotify streaming history data analysis. If you have any questions or comments, please feel free to reach out to me. I would love to hear from you! :)</p>


</section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div>CC0 1.0 Universal</div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{wagner2023,
  author = {Wagner, Johann and Wagner, Johann},
  title = {Spotify {Exploratory} {Data} {Analysis} - {Streaming}
    {History} {Data}},
  date = {2023-12-29},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-wagner2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Wagner, Johann, and Johann Wagner. 2023. <span>“Spotify Exploratory Data
Analysis - Streaming History Data.”</span> December 29, 2023.
</div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p><span class="faux-block">© 2024 Johann Wagner CC0-1.0 License</span></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p><span class="faux-block"><a href="https://github.com/johann-wagner/johann-wagner.github.io">View source code on my GitHub</a></span></p>
</div>
  </div>
</footer>


</body></html>